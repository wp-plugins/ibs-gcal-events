function IBS_GCAL_EVENTS(a,e,h){this.init(e,h)}
(function(a){IBS_GCAL_EVENTS.prototype.init=function(e,h){var g=this;this.options={calendar:"en.usa#holiday@group.v.calendar.google.com",apiKey:"AIzaSyBwcmfwl7W1aMyo9wnXwmASRfZ0sOhGhRc",dateFormat:"ddd MMM DD",timeFormat:"h:mm a",errorMsg:"No events in calendar",max:100,start:"now",descending:!1};for(var c in e)"undefined"!==typeof this.options[c]&&""!==e[c]&&(this.options[c]=e[c]);this.qtip_params=function(b){var a="";"undefined"!==typeof b.location&&""!==b.location&&(a="<p>Location: "+b.location+
"</p>");var c="";"undefined"!==typeof b.description&&""!==b.description&&(c="<p>"+b.description+"</p>");var f=moment(b.start).format(g.options.dateFormat+" "+g.options.timeFormat)+moment(b.end).format(" - "+g.options.timeFormat);b.allDay&&(f="All day");return{content:{text:"<p>"+b.title+"</p>"+a+c+"<p>"+f+"</p>"},position:{my:"bottom center",at:"top center"},style:{classes:e.qtip.style+" "+e.qtip.rounded+e.qtip.shadow},show:{event:"mouseover"},hide:{event:"mouseout mouseleave"}}};c="https://www.googleapis.com/calendar/v3/calendars/"+
encodeURIComponent(this.options.calendar.trim())+"/events?key="+this.options.apiKey+"&orderBy=startTime&singleEvents=true";"now"===this.options.start&&(this.options.start=moment().format("YYYY-MM-DD"));c+="&timeMin="+(new Date(this.options.start)).toISOString();a.getJSON(c).then(function(b){g.options.descending&&(b.items=b.items.reverse());b.items=b.items.slice(0,g.options.max);var d=[];a.each(b.items,function(b,a){var c={id:b,title:a.summary||"",start:moment(a.start.dateTime||a.start.date||""),end:moment(a.end.dateTime||
a.end.date||""),location:"undefined"===typeof a.location?"":a.location,description:"undefined"===typeof a.description?"":a.description,url:"undefined"===typeof a.htmlLink?"":a.htmlLink};d.push(c)});0===d.length&&d.push({title:"No events found",start:moment(),end:moment(),location:"",description:"",url:""});if("shortcode"===h){var c="#ibs-gcal-events-"+e.id;a(c).empty().css("cursor","pointer");for(b=0;b<d.length;b++){var f=e.dateFormat,f=moment(d[b].start).format(f),k=moment(d[b].start).format(e.timeFormat),
l=moment(d[b].end).format(e.timeFormat);a(c).append(a("<div>").append(a("<div>").addClass("bar").append(a("<a>").attr({href:d[b].url,target:"_blank"}).text(d[b].title).css("padding","3px"))).append(a("<div>").addClass("when-div").append(a("<span>").text(f)).append(a("<span>").text(k)).append(a("<span>").text("to")).append(a("<span>").text(l))).append(a("<div>").text(d[b].location).addClass("where-div")).append(a("<div>").css("display",""===d[b].description?"none":"block").append(a("<div>").html(d[b].description).addClass("textbox"))))}}else for(c=
"#ibs-wgcal-events-"+e.id,b=0;b<d.length;b++)f=g.qtip_params(d[b]),a(c).append(a('<div class="gcal-widget-div">').qtip(f).append(a("<a>").attr({href:d[b].url,target:"_blank"}).text(d[b].title).css("padding","3px")))},function(){console.log("Get Widget Google Events failed.");a("#ibs-gcal-events-"+e.id).html("<p><strong>"+g.options.errorMsg+"</strong></p>")})}})(jQuery);
